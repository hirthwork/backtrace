import testing ;

alias valgrind
    :
    :
    :
    : <testing.launcher>"valgrind --leak-check=full --error-exitcode=1"
    ;

compile demangle-double-inclusion.cpp ;
unit-test test-demangle : test-demangle.cpp ..//backtrace valgrind ;

compile helpers-double-inclusion.cpp ;

compile backtrace-double-inclusion-c.c ;
compile backtrace-double-inclusion.cpp ;
unit-test test-backtrace-c : test-backtrace-c.c ..//backtrace valgrind ;
unit-test test-backtrace : test-backtrace.cpp ..//backtrace valgrind ;

compile record-double-inclusion-c.c ;
compile record-double-inclusion.cpp ;
unit-test test-record : test-record.cpp ..//backtrace valgrind ;

compile malloced-explicit-good.cpp ;
compile-fail malloced-explicit-bad.cpp ;

compile demangled-explicit-good.cpp ;
compile-fail demangled-explicit-bad.cpp ;

