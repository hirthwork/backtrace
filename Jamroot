import package : install ;

project
    : requirements <include>. <warnings>all <warnings-as-errors>on
      <define>_GNU_SOURCE=1
      <stdlib>stlport:<define>_GLIBCXX_HAVE_WCSFTIME=1
      <cflags>-ansi <cxxflags>-ansi
      <cflags>-pedantic-errors <cxxflags>-pedantic-errors
      <cflags>-Wextra <cxxflags>-Wextra
      <linkflags>-rdynamic
    ;

lib dl : : <link>shared ;

alias libs : dl ;
alias libs : : <target-os>freebsd ;

lib backtrace : backtrace-c.c frames.c libs ;
lib backtracexx : backtrace.cpp demangle.cpp backtrace ;

install backtrace-install
    : <install-header-subdir>backtrace
    :
    : backtrace
    : backtrace.h record.h
    ;

install backtracexx-install
    : <install-header-subdir>backtrace
    :
    : backtracexx
    : backtrace.hpp demangle.hpp record.h record.hpp
    ;

alias user-manual : doc//user-manual ;
package.install-data user-manual-install : doc/backtrace : user-manual ;
explicit user-manual user-manual-install ;

alias test : tests//test-base ;
alias mega-test : tests//mega-test ;
explicit test mega-test ;

