import package : install ;

project
    : requirements <include>. <linkflags>-rdynamic
      <warnings>all <cflags>-Wextra <cxxflags>-Wextra
      <warnings-as-errors>on <cflags>-ansi <cxxflags>-ansi
      <cflags>-D_GNU_SOURCE
    ;

lib dl : : <link>shared ;

alias libs : dl ;
alias libs : : <target-os>freebsd ;

lib backtrace : backtrace-c.c frames.c libs ;
lib backtracexx : backtrace.cpp demangle.cpp backtrace ;

install backtrace-install
    : <install-header-subdir>backtrace
    :
    : backtrace
    : backtrace.h record.h
    ;

install backtracexx-install
    : <install-header-subdir>backtrace
    :
    : backtracexx
    : backtrace.hpp demangle.hpp record.h record.hpp
    ;

alias gcc-test
    : test/<toolset>gcc/<toolset-gcc:version>4.2
      test/<toolset>gcc/<toolset-gcc:version>4.3
      test/<toolset>gcc/<toolset-gcc:version>4.4
      test/<toolset>gcc/<toolset-gcc:version>4.5
      test/<toolset>gcc/<toolset-gcc:version>4.6
      test/<toolset>gcc/<toolset-gcc:version>4.7
    ;

alias stdlib-test
    : gcc-test/<stdlib>native
      gcc-test/<stdlib>stlport
    ;

alias toolset-test
    : stdlib-test
      test/<toolset>clang
    ;

alias link-test
    : toolset-test/<link>static
      toolset-test/<link>shared
    ;

alias threading-test
    : link-test/<threading>single
      link-test/<threading>multi
    ;

alias runtime-test
    : threading-test/<runtime-debugging>on
      threading-test/<runtime-debugging>off
    ;

alias mega-test : runtime-test ;

explicit
    test
    gcc-test
    stdlib-test
    toolset-test
    link-test
    threading-test
    runtime-test
    mega-test
    ;

