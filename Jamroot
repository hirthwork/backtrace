import package ;

project
    : requirements <include>. <linkflags>-rdynamic
    ;

explicit test ;
explicit coverage ;

alias common-flags
    :
    :
    :
    : <cxxflags>-Wall <cxxflags>-Wextra <cxxflags>-Werror <cxxflags>-ansi
      <cxxflags>-pedantic-errors
    ;

alias coverage-flags
    :
    :
    :
    : <cxxflags>-p <linkflags>-p
      <cxxflags>-fprofile-arcs <linkflags>-fprofile-arcs
      <cxxflags>-ftest-coverage
    ;

alias backtrace-core : backtrace.cpp helpers.cpp record.cpp common-flags ;

lib backtrace : backtrace-core ;
lib coverage : backtrace-core coverage-flags ;

package.install dist
    : <install-header-subdir>reinvented-wheels
    :
    : backtrace
    : backtrace.h backtrace.hpp record.h record.hpp
    ;

