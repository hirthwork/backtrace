import package ;

project
    : requirements <include>. <linkflags>-rdynamic
    ;

alias common-flags
    :
    :
    :
    : <cflags>-Wall <cxxflags>-Wall <cflags>-Wextra <cxxflags>-Wextra
      <cflags>-Werror <cxxflags>-Werror <cflags>-ansi <cxxflags>-ansi
      <cflags>-pedantic-errors <cxxflags>-pedantic-errors
    ;

alias coverage-flags
    :
    :
    :
    : <cflags>-p <cxxflags>-p <linkflags>-p <cflags>-fprofile-arcs
      <cxxflags>-fprofile-arcs <linkflags>-fprofile-arcs
      <cflags>-ftest-coverage <cxxflags>-ftest-coverage
    ;

lib dl ;

alias backtrace-sources
    : backtrace.cpp demangle.cpp dl common-flags
    ;

lib backtrace : backtrace-sources ;
lib coverage : backtrace-sources coverage-flags ;

explicit test ;
explicit coverage ;

package.install dist
    : <install-header-subdir>reinvented-wheels
    :
    : backtrace
    : backtrace.h backtrace.hpp demangle.hpp record.h record.hpp
    ;

