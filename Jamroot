import package : install ;

project
    : requirements <include>. <linkflags>-rdynamic
      <cflags>-Wall <cxxflags>-Wall <cflags>-Wextra <cxxflags>-Wextra
      <cflags>-Werror <cxxflags>-Werror <cflags>-ansi <cxxflags>-ansi
      <cflags>-pedantic-errors <cxxflags>-pedantic-errors
    ;

lib dl : : <link>shared ;

lib backtrace : backtrace.cpp demangle.cpp frames.cpp dl ;

alias gcc-test
    : test/<toolset>gcc/<toolset-gcc:version>4.3
      test/<toolset>gcc/<toolset-gcc:version>4.4
      test/<toolset>gcc/<toolset-gcc:version>4.5
      test/<toolset>gcc/<toolset-gcc:version>4.6
      test/<toolset>gcc/<toolset-gcc:version>4.7
    ;

alias stdlib-test
    : gcc-test/<stdlib>native
      gcc-test/<stdlib>stlport
    ;

alias toolset-test
    : stdlib-test
      test/<toolset>clang
    ;

alias link-test
    : toolset-test/<link>static
      toolset-test/<link>shared
    ;

alias threading-test
    : link-test/<threading>single
      link-test/<threading>multi
    ;

alias mega-test : threading-test ;

explicit
    test gcc-test stdlib-test toolset-test link-test threading-test mega-test ;

install library
    :
    :
    : backtrace
    ;

install headers
    : <install-header-subdir>reinvented-wheels
    :
    :
    : backtrace.h record.h
    ;

install headers-cxx
    : <install-header-subdir>reinvented-wheels
    :
    :
    : backtrace.hpp demangle.hpp record.hpp
    ;

